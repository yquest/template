plugins {
  id "com.moowork.node" version "0.12"
}
group 'pt.fabm'
version '1.0.0-SNAPSHOT'


node {
  version = '8.10.0'
  npmVersion = '6.7.0'
  download = true
  workDir = file("${project.buildDir}/node")
  nodeModulesDir = file("${project.projectDir}")
}

task nodeClientBuild(type: NpmTask) {
  args = ['run', 'build']
}

task nodeClientStart(type: NpmTask) {
  args = ['run', 'start']
}

task nodeClientBuildProd(type: NpmTask) {
  args = ['run', 'buildProd']
}

task nodeNoSSRBuild(type: NpmTask) {
  args = ['run', 'no-ssr']
}

task nodeSSRBuild(type: NpmTask) {
  args = ['run', 'ssr']
}

task distClean(type: Delete) {
  delete fileTree(dir: "${project.projectDir}/dist")
}

nodeClientBuild.dependsOn(npm_install)
nodeClientBuild.enabled = true
nodeClientBuildProd.dependsOn(npm_install)
nodeClientBuildProd.enabled = true
